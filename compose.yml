services:
  fastlane:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        TRACK_OWNER_PKEY: ${TRACK_OWNER_PKEY}
        OASIS_CONTRACT_ADDRESS: ${OASIS_CONTRACT_ADDRESS}
        NEXT_PUBLIC_OASIS_CONTRACT_ADDRESS: ${NEXT_PUBLIC_OASIS_CONTRACT_ADDRESS}
        NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID: ${NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID}
        DYNAMIC_ENVIRONMENT_ID: ${DYNAMIC_ENVIRONMENT_ID}
        DYNAMIC_API_BASE_URL: ${DYNAMIC_API_BASE_URL}
        DATABASE_URL: ${DATABASE_URL}
        RESEND_API_KEY: ${RESEND_API_KEY}
        UMAMI_WEBSITE_ID: ${UMAMI_WEBSITE_ID}
    image: ghcr.io/narasim-teja/fastlane:latest
    ports:
      - "3000:3000"
    networks:
      - fastlane_network
    environment:
      - TRACK_OWNER_PKEY=${TRACK_OWNER_PKEY}
      - OASIS_CONTRACT_ADDRESS=${OASIS_CONTRACT_ADDRESS}
      - NEXT_PUBLIC_OASIS_CONTRACT_ADDRESS=${NEXT_PUBLIC_OASIS_CONTRACT_ADDRESS}
      - NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID=${NEXT_PUBLIC_DYNAMIC_ENVIRONMENT_ID}
      - DYNAMIC_ENVIRONMENT_ID=${DYNAMIC_ENVIRONMENT_ID}
      - DYNAMIC_API_BASE_URL=${DYNAMIC_API_BASE_URL}
      - DATABASE_URL=${DATABASE_URL}
      - RESEND_API_KEY=${RESEND_API_KEY}
      - UMAMI_WEBSITE_ID=${UMAMI_WEBSITE_ID}
      - IS_DOCKER=true
      - NODE_ENV=production

networks:
  fastlane_network:
    external: true
